---
title: '[Streamlit Cloud] ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸installã§ããªã„ãƒã‚°'
tags:
  - Python
  - pip
  - conda
  - Streamlit
private: false
updated_at: '2023-01-17T03:24:25+09:00'
id: aadd218bfbe41c678a94
organization_url_name: null
slide: false
ignorePublish: false
---

[streamlit](https://streamlit.io/)ã‚’æœ€è¿‘çŸ¥ã£ãŸã®ã§ã™ãŒæ‰‹è»½ã«ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚’ã—ã¦ãã®ã¾ã¾UIã«ä¹—ã£ã‘ãŸã„ã¨ãã«é‡å®ã—ã¦ã„ã¾ã™ã€‚

ä»Šå›ã¯streamlitã§ä½œã£ãŸã‚¢ãƒ—ãƒªã‚’å…¬é–‹ã—ãŸã Streamlit Cloudã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒinstallã§ããªã„ãƒã‚°ã«é­é‡ã—ãŸã®ã§ãã®è§£æ±ºæ³•ã§ã™ã€‚
ï¼Šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¯anacondaã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚

<b>ç’°å¢ƒ</b>
conda 4.11.0
python 3.9

# è§£æ±ºæ³•
å…ˆã«çµè«–ã‚’è¨€ã†ã¨condaçµŒç”±ã®installã¯è«¦ã‚ã¦pipã«å¤‰ãˆã¾ã—ãŸã€‚
`pip list --format=freeze > requirements.txt`

# ä½•ã‚’ã—ãŸã‹
## â‘ `conda list -e > requirements.txt`
ä¸€ç•ªæœ€åˆã¯ä¸Šè¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã§ä½œæˆã—ãŸrequirements.txtã‚’ã‚ã’ã¦ã„ã¾ã—ãŸã€‚

ã“ã‚Œã¯condaç”¨ã®ç’°å¢ƒã®ã‚ˆã†ã§ã™ã€‚streamlit cloudã§ã¯requirements.txtã¯pipã§installã™ã‚‹ã®ã§ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã—ã¾ã„ã¾ã—ãŸ

#### ã‚¨ãƒ©ãƒ¼å†…å®¹
```bash
ERROR: Invalid requirement: '_ipyw_jlab_nb_ext_conf=0.1.0=py38_0' (from line 4 of /app/chem_app/requirements.txt)

Hint: = is not a valid operator. Did you mean == ?
```

## â‘¡`conda env export > environment.yml`
condaã§installã—ãŸã„å ´åˆã¯environment.ymlã§å‡ºåŠ›ã™ã‚Œã°è‰¯ã„ã¨ã®ã“ã¨ã€‚

https://discuss.streamlit.io/t/managing-your-streamlit-dependencies-using-conda/12346/11

packageã®è§£æ±ºãŒã§ããšæ–­å¿µã€‚
#### ã‚¨ãƒ©ãƒ¼å†…å®¹
```bash
Collecting package metadata (repodata.json): ...working... [æ—¥ä»˜] done
Solving environment: ...working... [æ—¥ä»˜] failed
```

## â‘¢`pip freeze > requirements.txt`
condaã§ä¸€é€šã‚Šè§¦ã£ã¦ç„¡ç†ã ã£ãŸã®ã§æ½”ãè«¦ã‚ã¾ã—ãŸã€‚
ï¼ŠcondaçµŒç”±ã®installã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹issueã‚‚æ•£è¦‹ã§ãã¾ã™ã€‚

pipã§ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚ŒãŸå¾Œã«requirements.txtã«å‡ºåŠ›ã—ã¦ã‚ã’ã¾ã—ãŸã€‚
installã§æ™®é€šã«ã‚¨ãƒ©ãƒ¼ã€‚
requirements.txtã‚’ç¢ºèªã™ã‚‹ã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‡ºåŠ›ã—ã¦ã»ã—ã„ã¨ã“ã‚ã«`@file`ã¿ãŸã„ãªè¨˜è¿°ãŒã€ã€
https://teratail.com/questions/272968

## â‘£`pip list --format=freeze > requirements.txt`
å…ˆã»ã©ã®teratailã§è§¦ã‚Œã¦ã‚ã‚‹é€šã‚Šformatã‚’æŒ‡å®šã—ã¦ã¿ã¾ã™ã€‚
requirements.txtã‹ã‚‰`@file`ãŒå‰Šé™¤ã•ã‚Œç„¡äº‹versionãŒå‡ºåŠ›ã•ã‚Œã¾ã—ãŸã€‚

installã¾ã§ã¯æˆåŠŸã—ãŸã®ã§ã™ãŒè¬ã®ã‚¨ãƒ©ãƒ¼ã«è‹¦ã—ã‚ã‚‰ã‚Œèµ·å‹•ã§ããªã„ã€‚ã‚‚ã†ä¸€æ­©
#### ã‚¨ãƒ©ãƒ¼å†…å®¹
```
ResolvePackageNotFound: 
 Ã— Building wheel for pycairo (pyproject.toml) did not run successfully.
  â”‚ exit code: 1
  â•°â”€> [12 lines of output]
      running bdist_wheel
      running build
      running build_py
      creating build
      creating build/lib.linux-x86_64-cpython-39
      creating build/lib.linux-x86_64-cpython-39/cairo
      copying cairo/__init__.py -> build/lib.linux-x86_64-cpython-39/cairo
      copying cairo/__init__.pyi -> build/lib.linux-x86_64-cpython-39/cairo
      copying cairo/py.typed -> build/lib.linux-x86_64-cpython-39/cairo
      running build_ext
      'pkg-config' not found.
      Command ['pkg-config', '--print-errors', '--exists', 'cairo >= 1.15.10']
      [end of output]
  note: This error originates from a subprocess, and is likely not a problem with pip.
  ERROR: Failed building wheel for pycairo
```

## â‘¤`pip list --format=freeze > requirements.txt`
æ½”ãcondaç’°å¢ƒã‚’ä½œã‚Šç›´ã—ã€å…¨ã¦pipçµŒç”±ã§å…¥ã‚Œã¾ã—ãŸã€‚

ç„¡äº‹å‹•ã„ãŸ
```bash
[] ğŸ Python dependencies were installed from /app/[app]/requirements.txt using pip.
[] ğŸ“¦ Processed dependencies!
```
