---
title: Laravelï¼šäºŒåº¦ã¨ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æ›¸ãæ–¹ã‚’é–“é•ãˆãªã„
tags:
  - laravel5
private: false
updated_at: '2022-03-02T23:09:31+09:00'
id: e00aa9945eb3c2901668
organization_url_name: null
slide: false
ignorePublish: false
---
ã“ã‚“ã«ã¡ã¯ã€‚Laravelã®ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ¯Žå›žé–“é•ãˆã‚‹ãƒžãƒ³ã§ã™ã€‚

sqlã®joinã¨åŒæ§˜ã«çµåˆå…ƒã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚­ãƒ¼ã‚’æ¯Žå›žå·¦å´ã«æ›¸ã„ã¦ã—ã¾ã†ç™–ãŒã‚ã‚Šã¾ã™ã€‚
*[æ³¨æ„]joinã¯ç‰¹ã«é †ç•ªã¯æ±ºã¾ã£ã¦ãªã„ãŒä¸€èˆ¬çš„ã«çµåˆå…ƒãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å·¦å´ã«æ›¸ãã“ã¨ãŒå¤šã„æ°—ãŒã™ã‚‹ã€‚

```User.php âŒ
class User extends Model
{
    public function posts()
    {
        return $this->hasMany(Post::class, 'id', 'user_id');
    }

    // ã“ã‚“ãªæ›¸ãæ–¹ã‚’ã™ã‚‹æ™‚ã‚‚ã‚ã‚‹ã€‚
    public function posts()
    {
        return $this->hasMany('App\Models\Post', 'id', 'user_id');
    }
}
```

ã“ã‚Œã‚‰ã¯ã‚¨ãƒ©ãƒ¼ã¨ãªã‚Šã¾ã™ã€‚ã²ã£ãã‚Šè¿”ã›ã°æ²»ã‚‹ã®ã§æ·±ãè€ƒãˆãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã™ãŒã€ãŸã¾ãŸã¾è¦‹ãŸè¨˜äº‹ã«ç­”ãˆãŒæ›¸ã„ã¦ã‚ã£ãŸã®ã§ã€å¿˜å‚™éŒ²ã¨ã—ã¦æœ¬è¨˜äº‹ã‚’æ›¸ãã¾ã™ã€‚
ðŸ”½åˆ†ã‹ã‚Šã‚„ã™ã„è¨˜äº‹
https://qiita.com/saya1001kirinn/items/69e2146691101f92d57b

å¼•ç”¨ã®å¼•ç”¨ã§ã™ãŒã“ã‚ŒãŒçœŸç†
>å¸¸ã«ç¬¬2å¼•æ•°ãŒ Foreign Key ã§ï¼Œç¬¬3å¼•æ•°ãŒ Local Key ã§ã™ã€‚

å…ˆã»ã©ã®ä¾‹ã§è¨€ã†ã¨
Foreign Key: user_id
Local Key: id
ã¨ãªã‚‹ã®ã§ã€ã“ã†ãªã‚‹ã€‚

```User.php
class User extends Model
{
    public function posts()
    {
        return $this->hasMany(Post::class, 'user_id', 'id');
    }
}
```

belongsToã‚‚åŒæ§˜ã«å¤–éƒ¨ã‚­ãƒ¼ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ¼ã®é †ç•ª

```Post.php
class Post extends Model
{
    public function user()
    {
        return $this->belongsTo(User::class, 'user_id', 'id');
    }
}
```

ãƒªãƒ¼ãƒ€ãƒ–ãƒ«ã«ã‚‚æ›¸ã„ã¦ã‚ã£ãŸã®ã§ã™ã€‚ã¡ã‚ƒã‚“ã¨èª­ã‚‚ã†ã€‚è‡ªæˆ’ã€‚
https://readouble.com/laravel/7.x/ja/eloquent-relationships.html

## ã¡ãªã¿ã«ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ä½œã£ã¦belongsToManyã™ã‚‹å ´åˆ
ã“ã‚Œã¯å½“åˆå‹˜é•ã„ã—ã¦ãŸsqlã®joinã¨åŒã˜è€ƒãˆæ–¹ã§ã„ã‘ã‚‹
ç¬¬ä¸€å¼•æ•°ï¼šçµåˆå…ˆãƒ¢ãƒ‡ãƒ«
ç¬¬äºŒå¼•æ•°ï¼šä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«å
ç¬¬ä¸‰å¼•æ•°ï¼šä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»å‘¼ã³å‡ºã—å…ƒã®å¤–éƒ¨ã‚­ãƒ¼
ç¬¬å››å¼•æ•°ï¼šä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»å‘¼ã³å‡ºã•ã‚Œå´ã®å¤–éƒ¨ã‚­ãƒ¼
>ç¬¬ï¼“å¼•æ•°ã¯ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®šç¾©ã—ã¦ã„ã‚‹ãƒ¢ãƒ‡ãƒ«ã®å¤–éƒ¨ã‚­ãƒ¼åã§ã€ä¸€æ–¹ã®ç¬¬ï¼”å¼•æ•°ã«ã¯çµåˆã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã®å¤–éƒ¨ã‚­ãƒ¼åã‚’æ¸¡ã—ã¾ã™ã€‚

Userã¨Postã®ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«tagsã‚’æƒ³å®š

```User.php
class User extends Model
{
    public function posts()
    {
        return $this->belongsToMany(Post::class, 'tags', 'user_id', 'post_id');
    }
}
```

```Post.php
class Post extends Model
{
    public function users()
    {
        return $this->belongsToMany(User::class, 'tags', 'post_id', 'user_id');
    }
}
```




